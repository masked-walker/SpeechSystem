# 智能会议室管理系统 - 权限控制矩阵

> 精细化权限管理，确保系统安全与灵活性

本文档详细定义了系统各角色的权限分配，帮助开发和系统管理员理解和配置权限控制。通过层级化的权限结构，系统实现了精确到按钮级别的访问控制。

## 1. 系统管理权限 🔧

| 权限代码           | 权限名称  | 权限类型 | 管理员 | 普通用户 | 审批人 |
| ------------------ | --------- | -------- | :----: | :------: | :----: |
| system             | 系统管理  | 菜单     | ✅      | ❌        | ❌      |
| system:user        | 用户管理  | 菜单     | ✅      | ❌        | ❌      |
| system:user:view   | 查看用户  | 按钮     | ✅      | ❌        | ❌      |
| system:user:add    | 添加用户  | 按钮     | ✅      | ❌        | ❌      |
| system:user:edit   | 编辑用户  | 按钮     | ✅      | ❌        | ❌      |
| system:user:delete | 封禁/解封 | 按钮     | ✅      | ❌        | ❌      |
| system:config      | 系统配置  | 菜单     | ✅      | ❌        | ❌      |
| system:config:view | 查看配置  | 按钮     | ✅      | ❌        | ❌      |
| system:config:edit | 编辑配置  | 按钮     | ✅      | ❌        | ❌      |

## 2. 会议室管理权限 🏢

| 权限代码    | 权限名称   | 权限类型 | 管理员 | 普通用户 | 审批人 |
| ----------- | ---------- | -------- | :----: | :------: | :----: |
| room        | 会议室管理 | 菜单     | ✅      | ✅        | ✅      |
| room:list   | 会议室列表 | 菜单     | ✅      | ✅        | ✅      |
| room:view   | 查看会议室 | 按钮     | ✅      | ✅        | ✅      |
| room:add    | 添加会议室 | 按钮     | ✅      | ❌        | ❌      |
| room:edit   | 编辑会议室 | 按钮     | ✅      | ❌        | ❌      |
| room:delete | 删除会议室 | 按钮     | ✅      | ❌        | ❌      |

## 3. 预订管理权限 📅

| 权限代码        | 权限名称      | 权限类型 | 管理员 | 普通用户 | 审批人 |
| --------------- | ------------- | -------- | :----: | :------: | :----: |
| booking         | 预订管理      | 菜单     | ✅      | ✅        | ✅      |
| booking:list    | 预订列表      | 菜单     | ✅      | ✅        | ✅      |
| booking:view    | 查看预订      | 按钮     | ✅      | ✅        | ✅      |
| booking:add     | 添加预订      | 按钮     | ✅      | ✅        | ✅      |
| booking:edit    | 编辑预订      | 按钮     | ✅      | ✅        | ✅      |
| booking:cancel  | 取消预订      | 按钮     | ✅      | ✅        | ✅      |
| booking:manage  | 管理所有预订* | 按钮     | ✅      | ❌        | ❌      |
| booking:approve | 审批预订      | 菜单     | ✅      | ❌        | ✅      |

> **特别说明**: 普通用户的编辑和取消权限仅适用于自己创建的预订记录，保障数据安全的同时提供必要的灵活性。

## 4. 通知管理权限 🔔

| 权限代码            | 权限名称  | 权限类型 | 管理员 | 普通用户 | 审批人 |
| ------------------- | --------- | -------- | :----: | :------: | :----: |
| notification        | 通知管理  | 菜单     | ✅      | ✅        | ✅      |
| notification:list   | 通知列表  | 菜单     | ✅      | ✅        | ✅      |
| notification:view   | 查看通知  | 按钮     | ✅      | ✅        | ✅      |
| notification:send   | 发送通知  | 按钮     | ✅      | ❌        | ❌      |
| notification:manage | 管理通知* | 按钮     | ✅      | ❌        | ❌      |

> **特别说明**: 普通用户和审批人的通知查看权限仅适用于发送给自己的通知，确保消息的私密性和安全性。

## 5. 统计报表权限 📊

| 权限代码    | 权限名称 | 权限类型 | 管理员 | 普通用户 | 审批人 |
| ----------- | -------- | -------- | :----: | :------: | :----: |
| report      | 统计报表 | 菜单     | ✅      | ✅        | ✅      |
| report:view | 使用统计 | 菜单     | ✅      | ✅        | ✅      |

## 权限控制实现说明 🛡️

### 多层级权限保障

1. **API级权限控制**：
   - 通过`@RequirePermission`注解实现
   - 拦截未授权的API访问请求
   - 自动记录权限验证失败的尝试

2. **数据级权限控制**：
   - 在服务层实现细粒度数据访问控制
   - 确保用户只能访问被授权的数据记录
   - 支持基于组织结构的数据隔离

### 关键数据访问控制重点

- **预订记录**：用户只能查看/编辑/取消自己的预订；审批人可以查看和审批所有待审批记录；管理员可以操作所有记录

- **通知**：用户只能查看发送给自己的通知；管理员可以查看/管理所有通知

- **用户资料**：用户只能查看/编辑自己的资料；管理员可以管理所有用户资料

### 权限继承机制

高级角色自动继承低级角色的所有权限，简化权限管理的同时保障系统安全。